<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Your Birthday Surprise is Here!</title>
<style>
    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background-color: #0b021a; 
        color: #fff;
        font-family: 'Arial', sans-serif;
        /* FIX: body ‡§∏‡•á overflow: hidden; ‡§π‡§ü‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ */
        background-image: radial-gradient(circle at center, #2a0a4a 0%, #0b021a 100%);
    }
                  /* Bounce Animation */
  @keyframes bounce {
    0%   { transform: translateY(-100px); opacity:0; }
    50%  { transform: translateY(20px); opacity:1; }
    70%  { transform: translateY(-10px); }
    100% { transform: translateY(0); }
  }

  .bounce {
    animation: bounce 1s ease;
  }
    
    h1 {
        font-size: 48px;
        color: #ffb7c5; 
        margin-bottom: 5px;
        text-shadow: 0 0 10px rgba(255, 105, 180, 0.7);
    }
    p.subtitle {
        font-size: 18px;
        color: #e0e0e0;
        margin-bottom: 40px;
    }

    #letter-card {
        width: 300px;
        height: 350px;
        background: #ffe3f1; 
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 105, 180, 0.4);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        position: relative;
        transition: all 0.8s ease-in-out;
        padding: 20px;
        box-sizing: border-box;
        overflow: hidden;
    }

    #letter-card.opened {
        width: 380px; 
        height: 80vh; 
        cursor: default;
        background: #fff; 
        padding: 20px; 
        transition: all 1.2s ease-in-out; 
        /* FIX: ‡§®‡•Ä‡§ö‡•á ‡§Æ‡§æ‡§∞‡•ç‡§ú‡§ø‡§® ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ ‡§§‡§æ‡§ï‡§ø "The End" ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ú‡§ó‡§π ‡§¨‡§®‡•á */
        margin-bottom: 50px; 
    }

    #initial-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: opacity 0.5s;
    }
    #initial-content.hidden {
        opacity: 0;
        position: absolute;
    }
    #initial-content i {
        font-size: 80px;
        color: #ff69b4; 
        margin-bottom: 10px;
    }
    #initial-content span {
        color: #333;
        font-weight: 600;
    }

    /* Scrollable wrapper */
    #scroll-wrapper {
        width: 100%;
        height: 100%;
        overflow-y: auto;
    }

    #letter-content {
        opacity: 0; 
        color: #333;
        width: 100%;
        text-align: left;
        line-height: 1.6;
        font-size: 20px;
        font-family: 'cursive',sans-serif}
    #letter-card.opened #letter-content {
        opacity: 1;
        transition: opacity 0.5s 0.5s; 
    }

    .typing-text {
        border-right: 2px solid #ff69b4;
        white-space: pre-wrap; 
        overflow: hidden;
        display: block; 
        padding-right: 2px;
        min-height: 1.2em;
    }

    /* Decorations */
    .deco-heart-top-left, .deco-heart-top-right, .deco-star-bottom-left, .deco-star-bottom-right {
        position: absolute;
        font-size: 24px;
        transition: opacity 0.3s;
    }
    .deco-heart-top-left { top: 10px; left: 10px; color:#ff69b4; }
    .deco-heart-top-right { top: 10px; right: 10px; color:#ff69b4; }
    .deco-star-bottom-left { bottom: 10px; left: 10px; color: #fcc419; }
    .deco-star-bottom-right { bottom: 10px; right: 10px; color: #fcc419; }

    #letter-card.opened .deco-heart-top-left,
    #letter-card.opened .deco-heart-top-right,
    #letter-card.opened .deco-star-bottom-left,
    #letter-card.opened .deco-star-bottom-right {
        opacity: 0;
    }
    
    /* The End styling */
    #the-end-message {
        margin-top: 20px;
        font-size: 24px;
        color: #ff69b4;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        font-weight: bold;
        text-shadow: 0 0 5px rgba(255, 105, 180, 0.5);
    }
    #the-end-message.visible {
        opacity: 1;
    }
</style>
</head>
<body class="bounce">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<h1>A Special Letter</h1>
<p class="subtitle">Just for you, on your special day üíå</p>

<div id="letter-card">
    <span class="deco-heart-top-left">‚ù§Ô∏è</span>
    <span class="deco-heart-top-right">‚ù§Ô∏è</span>
    <span class="deco-star-bottom-left">‚ú®</span>
    <span class="deco-star-bottom-right">‚ú®</span>

    <div id="initial-content">
        <i class="fas fa-envelope-open-text"></i>
        <span>Click to open</span>
    </div>

    <div id="scroll-wrapper">
        <div id="letter-content">
            <span id="typing-area" class="typing-text"></span>
        </div>
    </div>
</div>

<div id="the-end-message">
    The End ‚ú®
</div>

<script>
const letterCard = document.getElementById('letter-card');
const initialContent = document.getElementById('initial-content');
const letterContent = document.getElementById('letter-content');
const typingArea = document.getElementById('typing-area');
const scrollWrapper = document.getElementById('scroll-wrapper');
const theEndMessage = document.getElementById('the-end-message'); 

let isTyping = false; 
let index = 0;
let typingInterval;

const fullText = `
Ha toh meri pyaari soanpapadi, ras me dubi huyi meri rasmalai, meri jal pari ,

Meri taraf se tumko bahut happy wala birthday to you.

Tumko pta toh hai ki hum tumse kitna jyada pyaar krte lekin phir bhi hum btayenge ki hum kitna jyada tumse pyaar krte aur tumko ye message padhna padega , toh sunno mai tumse itna jyada pyaar krte hai jitna ram jii sita maa se krte hai, jitna Mahadev jii maa Parvati se krte hai, utna pyaar krte hai jitna shree Krishna apna radha jii se krte hai. Tere bina agr mujhe swarg bhi mile toh mai uske taraf dekhunga bhi nhi . Ha humko pta hai ki hum tumko bahut baar bura feel krwa dete hai lekin hum ye sb jann ke nhi krte hai galti se ho jata hai toh mera koi baat dil pe lene ka jarurt nhi hai aur abhi tk mai jo bhi galti hua hai mere se uske liye hath jode ke sorry, piliz humko maaf kr dena. Ha aur ek baat hum bahut jyada majak krte hai toh isse kbhi bura Mt manna, hum ussi ke sath majak krte hai jiske sath hum comfortable feel krte aur tere sath toh kuch jyada hi comfortable feel krte hai kyuki tere sath abhi humlog apna pura jeevan bithana hai aur hum tumko thank you bolna chahenge kyuki mera jindagi mai aayi.

Tera smile humko itna jyada sundar lgta hai ki kya bole, bs ek hi chij bolna chahenge ki tera smile ko kisi ka najar na lge, tum bs smile krti hai tb lgta hai ye smile ko dekhte hi rhe, itna jyada pyaara kisi ka smile kaise ho skta hai . Yehi chahte hai ki hamesha tere sath rhe. Tera smile dekh lete hai toh sbkuch thik ho jata hai. 
Tum meri jindagi wo khubsurat kahani hai jisko hum chahte hai ki kbhi khatam na ho, ye kahani hamesha chlte rhe . Mai bahut ki jyada kismat wala hun jo mere pass tum hai.
 
At the last but not least, hum yehi kehna chahte hai ki 
Baar baar din ye aaye, baar baar dil ye gaaye 
Tu jiye hajaro saal ,ye meri hai aarzoo 
Happy birthday to you 
Happy birthday to you my beautiful soul(meri jaan)
Happy birthday to you.

`;


function finishTyping() {
    if (isTyping) {
        clearInterval(typingInterval);
        isTyping = false;
    }
    typingArea.textContent = fullText;
    typingArea.classList.remove('typing-text');

    // Scroll inner wrapper to top
    scrollWrapper.style.scrollBehavior = 'auto';
    scrollWrapper.scrollTop = 0; 
    
    // Add a small delay (e.g., 300ms) to allow the letter-card transition to finish
    // before showing the 'The End' message.
    setTimeout(() => {
        theEndMessage.classList.add('visible'); 
    }, 300);
}

function startTyping() {
    letterContent.style.opacity = '1';
    scrollWrapper.scrollTop = 0;
    scrollWrapper.style.scrollBehavior = 'auto';
    isTyping = true;
    index = 0;
    typingArea.textContent = '';
    // Hide 'The End' message before starting to type
    theEndMessage.classList.remove('visible'); 

    typingInterval = setInterval(() => {
        if (index < fullText.length) {
            typingArea.textContent += fullText.charAt(index);
            index++;
            
            // Auto-scroll to bottom while typing
            scrollWrapper.scrollTop = scrollWrapper.scrollHeight;

        } else {
            finishTyping();
        }
    }, 70);
}

letterCard.addEventListener('click', () => {
    if (letterCard.classList.contains('opened') && isTyping) {
        finishTyping();
        return;
    }

    if (!letterCard.classList.contains('opened')) {
        letterCard.classList.add('opened');
        initialContent.classList.add('hidden'); 

        setTimeout(() => {
            startTyping();
        }, 1200);
    }
});
</script>

</body>
</html>
