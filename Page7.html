<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scrollable Portrait Letter (Fixed Scroll)</title>
<style>
    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background-color: #0b021a; 
        color: #fff;
        font-family: 'Arial', sans-serif;
        overflow: hidden; 
        background-image: radial-gradient(circle at center, #2a0a4a 0%, #0b021a 100%);
    }
    
    h1 {
        font-size: 48px;
        color: #ffb7c5; 
        margin-bottom: 5px;
        text-shadow: 0 0 10px rgba(255, 105, 180, 0.7);
    }
    p.subtitle {
        font-size: 18px;
        color: #e0e0e0;
        margin-bottom: 40px;
    }

    #letter-card {
        width: 300px;
        height: 350px;
        background: #ffe3f1; 
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5), 0 0 40px rgba(255, 105, 180, 0.4);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        position: relative;
        transition: all 0.8s ease-in-out;
        padding: 20px;
        box-sizing: border-box;
        overflow: hidden;
    }

    #letter-card.opened {
        width: 380px; 
        height: 80vh; 
        cursor: default;
        background: #fff; 
        padding: 20px; 
        transition: all 1.2s ease-in-out; 
    }

    #initial-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: opacity 0.5s;
    }
    #initial-content.hidden {
        opacity: 0;
        position: absolute;
    }
    #initial-content i {
        font-size: 80px;
        color: #ff69b4; 
        margin-bottom: 10px;
    }
    #initial-content span {
        color: #333;
        font-weight: 600;
    }

    /* Scrollable wrapper */
    #scroll-wrapper {
        width: 100%;
        height: 100%;
        overflow-y: auto;
    }

    #letter-content {
        opacity: 0; 
        color: #333;
        width: 100%;
        text-align: left;
        line-height: 1.6;
        font-size: 18px;
        font-family: 'Cursive', fantasy;
    }
    #letter-card.opened #letter-content {
        opacity: 1;
        transition: opacity 0.5s 0.5s; 
    }

    .typing-text {
        border-right: 2px solid #ff69b4;
        white-space: pre-wrap; 
        overflow: hidden;
        display: block; 
        padding-right: 2px;
        min-height: 1.2em;
    }

    /* Decorations */
    .deco-heart-top-left, .deco-heart-top-right, .deco-star-bottom-left, .deco-star-bottom-right {
        position: absolute;
        font-size: 24px;
        transition: opacity 0.3s;
    }
    .deco-heart-top-left { top: 10px; left: 10px; color:#ff69b4; }
    .deco-heart-top-right { top: 10px; right: 10px; color:#ff69b4; }
    .deco-star-bottom-left { bottom: 10px; left: 10px; color: #fcc419; }
    .deco-star-bottom-right { bottom: 10px; right: 10px; color: #fcc419; }

    #letter-card.opened .deco-heart-top-left,
    #letter-card.opened .deco-heart-top-right,
    #letter-card.opened .deco-star-bottom-left,
    #letter-card.opened .deco-star-bottom-right {
        opacity: 0;
    }
</style>
</head>
<body>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<h1>A Special Letter</h1>
<p class="subtitle">Just for you, on your special day üíå</p>

<div id="letter-card">
    <span class="deco-heart-top-left">‚ù§Ô∏è</span>
    <span class="deco-heart-top-right">‚ù§Ô∏è</span>
    <span class="deco-star-bottom-left">‚ú®</span>
    <span class="deco-star-bottom-right">‚ú®</span>

    <div id="initial-content">
        <i class="fas fa-envelope-open-text"></i>
        <span>Click to open</span>
    </div>

    <!-- Scrollable wrapper -->
    <div id="scroll-wrapper">
        <div id="letter-content">
            <span id="typing-area" class="typing-text"></span>
        </div>
    </div>
</div>

<script>
const letterCard = document.getElementById('letter-card');
const initialContent = document.getElementById('initial-content');
const letterContent = document.getElementById('letter-content');
const typingArea = document.getElementById('typing-area');
const scrollWrapper = document.getElementById('scroll-wrapper');

let isTyping = false; 
let index = 0;
let typingInterval;

const fullText = `
My Dearest Madam,

Your heart is pure gold, and your spirit is absolutely infectious. I want you to know how incredibly grateful I am to have you in my life. Thank you for being the wonderful, amazing, absolutely fantastic person that you are. The world is so much brighter because you‚Äôre in it.

I still remember the first time we met. Your smile lit up the whole room, and I knew right away that you were going to be a very special part of my life. Every day spent with you is a treasure, full of laughter, deep conversations, and memories that I will cherish forever. You inspire me to be a better person, to chase my dreams with passion, and to always look on the bright side.

On this special day, I hope you are surrounded by all the joy, love, and cake you deserve! May your coming year be filled with exciting adventures, new opportunities, and endless happiness. Don't ever stop shining, because you truly are one of a kind.

Wishing you the happiest of birthdays, filled with every bit of magic and warmth you bring to the world.

Thank you for everything. I'm so lucky to have you.

Happy Birthday, beautiful soul! ü•Ç‚ú®

With all my love and best wishes,

[‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ]
`;

function finishTyping() {
    if (isTyping) {
        clearInterval(typingInterval);
        isTyping = false;
    }
    typingArea.textContent = fullText;
    typingArea.classList.remove('typing-text');

    // Scroll inner wrapper to top
    scrollWrapper.style.scrollBehavior = 'auto';
    setTimeout(() => {
        scrollWrapper.scrollTop = 0;
    }, 50); // ensures full rendering
}

function startTyping() {
    letterContent.style.opacity = '1';
    scrollWrapper.scrollTop = 0;
    scrollWrapper.style.scrollBehavior = 'auto';
    isTyping = true;
    index = 0;
    typingArea.textContent = '';

    typingInterval = setInterval(() => {
        if (index < fullText.length) {
            typingArea.textContent += fullText.charAt(index);
            index++;
            
            // Auto-scroll to bottom while typing
            scrollWrapper.scrollTop = scrollWrapper.scrollHeight;

        } else {
            finishTyping();
        }
    }, 70);
}

letterCard.addEventListener('click', () => {
    if (letterCard.classList.contains('opened') && isTyping) {
        finishTyping();
        return;
    }

    if (!letterCard.classList.contains('opened')) {
        letterCard.classList.add('opened');
        initialContent.classList.add('hidden'); 

        setTimeout(() => {
            startTyping();
        }, 1200);
    }
});
</script>

</body>
</html>